import { vi } from "vitest"
beforeAll(async () => {
  const processors = await import("../../../../src/events/processors")
  const events = await import("../../../../src/events")
  vi.spyOn(processors.analyticsProcessor, "processEvent")

  vi.spyOn(events.identification, "identifyTenantGroup")
  vi.spyOn(events.identification, "identifyUser")

  vi.spyOn(events.backfill, "appSucceeded")
  vi.spyOn(events.backfill, "tenantSucceeded")

  vi.spyOn(events.account, "created")
  vi.spyOn(events.account, "deleted")
  vi.spyOn(events.account, "verified")

  vi.spyOn(events.app, "created")
  vi.spyOn(events.app, "updated")
  vi.spyOn(events.app, "deleted")
  vi.spyOn(events.app, "published")
  vi.spyOn(events.app, "unpublished")
  vi.spyOn(events.app, "templateImported")
  vi.spyOn(events.app, "fileImported")
  vi.spyOn(events.app, "versionUpdated")
  vi.spyOn(events.app, "versionReverted")
  vi.spyOn(events.app, "reverted")
  vi.spyOn(events.app, "exported")

  vi.spyOn(events.auth, "login")
  vi.spyOn(events.auth, "logout")
  vi.spyOn(events.auth, "SSOCreated")
  vi.spyOn(events.auth, "SSOUpdated")
  vi.spyOn(events.auth, "SSOActivated")
  vi.spyOn(events.auth, "SSODeactivated")

  vi.spyOn(events.automation, "created")
  vi.spyOn(events.automation, "deleted")
  vi.spyOn(events.automation, "tested")
  vi.spyOn(events.automation, "stepCreated")
  vi.spyOn(events.automation, "stepDeleted")
  vi.spyOn(events.automation, "triggerUpdated")

  vi.spyOn(events.datasource, "created")
  vi.spyOn(events.datasource, "updated")
  vi.spyOn(events.datasource, "deleted")

  vi.spyOn(events.email, "SMTPCreated")
  vi.spyOn(events.email, "SMTPUpdated")

  vi.spyOn(events.layout, "created")
  vi.spyOn(events.layout, "deleted")

  vi.spyOn(events.org, "nameUpdated")
  vi.spyOn(events.org, "logoUpdated")
  vi.spyOn(events.org, "platformURLUpdated")
  vi.spyOn(events.org, "analyticsOptOut")

  vi.spyOn(events.installation, "versionChecked")

  vi.spyOn(events.query, "created")
  vi.spyOn(events.query, "updated")
  vi.spyOn(events.query, "deleted")
  vi.spyOn(events.query, "imported")
  vi.spyOn(events.query, "previewed")

  vi.spyOn(events.role, "created")
  vi.spyOn(events.role, "updated")
  vi.spyOn(events.role, "deleted")
  vi.spyOn(events.role, "assigned")
  vi.spyOn(events.role, "unassigned")

  vi.spyOn(events.rows, "imported")
  vi.spyOn(events.rows, "created")

  vi.spyOn(events.screen, "created")
  vi.spyOn(events.screen, "deleted")

  vi.spyOn(events.user, "created")
  vi.spyOn(events.user, "updated")
  vi.spyOn(events.user, "deleted")
  vi.spyOn(events.user, "permissionAdminAssigned")
  vi.spyOn(events.user, "permissionAdminRemoved")
  vi.spyOn(events.user, "permissionBuilderAssigned")
  vi.spyOn(events.user, "permissionBuilderRemoved")
  vi.spyOn(events.user, "invited")
  vi.spyOn(events.user, "inviteAccepted")
  vi.spyOn(events.user, "passwordForceReset")
  vi.spyOn(events.user, "passwordUpdated")
  vi.spyOn(events.user, "passwordResetRequested")
  vi.spyOn(events.user, "passwordReset")

  vi.spyOn(events.group, "created")
  vi.spyOn(events.group, "updated")
  vi.spyOn(events.group, "deleted")
  vi.spyOn(events.group, "usersAdded")
  vi.spyOn(events.group, "usersDeleted")
  vi.spyOn(events.group, "createdOnboarding")
  vi.spyOn(events.group, "permissionsEdited")

  vi.spyOn(events.serve, "servedBuilder")
  vi.spyOn(events.serve, "servedApp")
  vi.spyOn(events.serve, "servedAppPreview")

  vi.spyOn(events.table, "created")
  vi.spyOn(events.table, "updated")
  vi.spyOn(events.table, "deleted")
  vi.spyOn(events.table, "exported")
  vi.spyOn(events.table, "imported")

  vi.spyOn(events.view, "created")
  vi.spyOn(events.view, "updated")
  vi.spyOn(events.view, "deleted")
  vi.spyOn(events.view, "exported")
  vi.spyOn(events.view, "filterCreated")
  vi.spyOn(events.view, "filterUpdated")
  vi.spyOn(events.view, "filterDeleted")
  vi.spyOn(events.view, "calculationCreated")
  vi.spyOn(events.view, "calculationUpdated")
  vi.spyOn(events.view, "calculationDeleted")

  vi.spyOn(events.plugin, "init")
  vi.spyOn(events.plugin, "imported")
  vi.spyOn(events.plugin, "deleted")

  vi.spyOn(events.license, "planChanged")
  vi.spyOn(events.license, "activated")
  vi.spyOn(events.license, "checkoutOpened")
  vi.spyOn(events.license, "checkoutSuccess")
  vi.spyOn(events.license, "portalOpened")
  vi.spyOn(events.license, "paymentFailed")
  vi.spyOn(events.license, "paymentRecovered")
})
